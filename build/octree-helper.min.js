/**
 * octree-helper v1.0.0 build Wed Oct 23 2019
 * https://github.com/vanruesc/octree-helper
 * Copyright 2019 Raoul van RÃ¼schen, Zlib
 */
"use strict";function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}(function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?b(exports,require("three")):"function"==typeof define&&define.amd?define(["exports","three"],b):(a=a||self,b(a.OCTREEHELPER={},a.THREE))})(void 0,function(a,b){'use strict';function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function e(a,b,c){return b&&d(a.prototype,b),c&&d(a,c),a}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&h(a,b)}function g(a){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},g(a)}function h(a,b){return h=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},h(a,b)}function i(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function j(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:i(a)}var k=[new Uint8Array([0,4]),new Uint8Array([1,5]),new Uint8Array([2,6]),new Uint8Array([3,7]),new Uint8Array([0,2]),new Uint8Array([1,3]),new Uint8Array([4,6]),new Uint8Array([5,7]),new Uint8Array([0,1]),new Uint8Array([2,3]),new Uint8Array([4,5]),new Uint8Array([6,7])],l=[new Uint8Array([0,0,0]),new Uint8Array([0,0,1]),new Uint8Array([0,1,0]),new Uint8Array([0,1,1]),new Uint8Array([1,0,0]),new Uint8Array([1,0,1]),new Uint8Array([1,1,0]),new Uint8Array([1,1,1])],m=function(a){function d(){var a,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return c(this,d),a=j(this,g(d).call(this)),a.name="OctreeHelper",a.octree=b,a.update(),a}return f(d,a),e(d,[{key:"createLineSegments",value:function(a,e){var h,m,o,p,q,r,s,t,u,v,w,x,y,z,A,B,f=Math.ceil,g=Math.pow,C=g(2,16)/8-1,D=new b.Group,E=new b.LineBasicMaterial({color:16777215*Math.random()});for(v=0,o=0,z=f(e/8191);0<z;--z){for(o+=8191>e?e:8191,e-=8191,m=8*o,p=new Uint16Array(3*m),q=new Float32Array(3*m),(x=0,y=0,h=a.next());!h.done&&v<o;){for(r=h.value,s=r.min,t=r.max,w=0;12>w;++w)B=k[w],p[y++]=x+B[0],p[y++]=x+B[1];for(w=0;8>w;++w,++x)A=l[w],q[3*x]=0===A[0]?s.x:t.x,q[3*x+1]=0===A[1]?s.y:t.y,q[3*x+2]=0===A[2]?s.z:t.z;++v<o&&(h=a.next())}u=new b.BufferGeometry,u.setIndex(new b.BufferAttribute(p,1)),u.addAttribute("position",new b.BufferAttribute(q,3)),D.add(new b.LineSegments(u,E))}this.add(D)}},{key:"update",value:function(){var a,b=null===this.octree?-1:this.octree.getDepth(),c=0;for(this.dispose();c<=b;)a=this.octree.findNodesByLevel(c),this.createLineSegments(a[Symbol.iterator](),"number"==typeof a.size?a.size:a.length),++c}},{key:"dispose",value:function(){var a,b,c,d,e,f,g=this.children;for(c=0,e=g.length;c<e;++c){for(a=g[c],b=a.children,(d=0,f=b.length);d<f;++d)b[d].geometry.dispose(),b[d].material.dispose();for(;0<b.length;)a.remove(b[0])}for(;0<g.length;)this.remove(g[0])}}]),d}(b.Group);a.OctreeHelper=m,Object.defineProperty(a,"__esModule",{value:!0})});
